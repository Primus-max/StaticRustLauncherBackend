# StaticRustLauncher Backend

–ë—ç–∫–µ–Ω–¥ –¥–ª—è –ª–∞—É–Ω—á–µ—Ä–∞ –∏–≥—Ä—ã Rust, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Ä–≤–µ—Ä–∞—Ö, –Ω–æ–≤–æ—Å—Ç—è—Ö, —Ö–æ—Å—Ç–∏–Ω–≥–∞—Ö –∏ –≤–µ—Ä—Å–∏—è—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
dotnet run
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
- **API**: `http://localhost:5208`
- **Swagger UI**: `http://localhost:5208/swagger`
- **HTTPS**: `https://localhost:7269` (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SSL)

## üìã API Endpoints

### –ù–æ–≤–æ—Å—Ç–∏
- **GET** `/api/news` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π

### –•–æ—Å—Ç–∏–Ω–≥–∏
- **GET** `/api/hostings` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ö–æ—Å—Ç–∏–Ω–≥–æ–≤

### –°–µ—Ä–≤–µ—Ä—ã
- **GET** `/api/servers` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **GET** `/api/statistics` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤)

### –í–µ—Ä—Å–∏–∏
- **GET** `/api/version` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ä—Å–∏—è—Ö –∏–≥—Ä—ã –∏ SFTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- **GET** `/api/version/client` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ß–µ—Ä–µ–∑ Swagger UI
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:5208/swagger`
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
3. –ù–∞–∂–º–∏—Ç–µ "Try it out" –∏ –∑–∞—Ç–µ–º "Execute"

### –ß–µ—Ä–µ–∑ .http —Ñ–∞–π–ª
–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å —Ñ–∞–π–ª `StaticRustLauncherBackend.http` —Å –≥–æ—Ç–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ VS Code –∏–ª–∏ Rider.

### –ß–µ—Ä–µ–∑ curl
```bash
# –ù–æ–≤–æ—Å—Ç–∏
curl http://localhost:5208/api/news

# –°–µ—Ä–≤–µ—Ä—ã
curl http://localhost:5208/api/servers

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:5208/api/statistics

# –í–µ—Ä—Å–∏–∏
curl http://localhost:5208/api/version
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è —Å–ø–∏—Å–∫–æ–≤)
```json
{
  "items": [
    // –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
  ],
  "message": "–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
  "success": true
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```json
{
  "usersOnline": 1250,
  "serversCount": 15
}
```

### –í–µ—Ä—Å–∏–∏
```json
{
  "currentVersion": "2.1.0",
  "clients": {
    "actual": "2.1.0",
    "333": "1.9.5",
    "12333": "1.8.2"
  },
  "sftp": [
    {
      "host": "sftp.hoster.by",
      "port": 22,
      "user": "user2120",
      "pass": "uT3cB1xE1r"
    }
  ]
}
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
StaticRustLauncherBackend/
‚îú‚îÄ‚îÄ Controllers/           # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ NewsController.cs
‚îÇ   ‚îú‚îÄ‚îÄ HostingsController.cs
‚îÇ   ‚îú‚îÄ‚îÄ ServersController.cs
‚îÇ   ‚îú‚îÄ‚îÄ StatisticsController.cs
‚îÇ   ‚îî‚îÄ‚îÄ VersionController.cs
‚îú‚îÄ‚îÄ Models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ Server.cs
‚îÇ   ‚îú‚îÄ‚îÄ Hosting.cs
‚îÇ   ‚îú‚îÄ‚îÄ NewsItem.cs
‚îÇ   ‚îú‚îÄ‚îÄ StatisticsData.cs
‚îÇ   ‚îú‚îÄ‚îÄ VersionInfo.cs
‚îÇ   ‚îî‚îÄ‚îÄ ApiResponse.cs
‚îú‚îÄ‚îÄ Services/             # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ IMockDataService.cs
‚îÇ   ‚îî‚îÄ‚îÄ MockDataService.cs
‚îú‚îÄ‚îÄ Properties/           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ launchSettings.json
‚îú‚îÄ‚îÄ Program.cs           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ StaticRustLauncherBackend.csproj
‚îú‚îÄ‚îÄ StaticRustLauncherBackend.sln
‚îî‚îÄ‚îÄ README.md
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `logs/` —Å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–µ–π
- –§–æ—Ä–º–∞—Ç: `log-YYYY-MM-DD.txt`
- –£—Ä–æ–≤–µ–Ω—å: Information –∏ –≤—ã—à–µ

### CORS
–ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ª—é–±—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏).

### –ü–∞–∫–µ—Ç—ã NuGet
- `Microsoft.AspNetCore.OpenApi` - –¥–ª—è Swagger
- `Serilog.AspNetCore` - –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `Serilog.Sinks.File` - –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
- `Swashbuckle.AspNetCore` - –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

## üìù –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

1. ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
2. ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ GET —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
3. ‚úÖ –°–µ—Ä–≤–µ—Ä—ã –∏ –≤–µ—Ä—Å–∏–∏
4. üîÑ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–±–∞–∑–æ–≤–∞—è)
5. üîÑ –§–∞–π–ª–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (—Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å)

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏
```bash
dotnet run --configuration Debug
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
Get-Content logs\log-*.txt -Wait

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
Get-Content logs\log-*.txt -Tail 50
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
Get-Process | Where-Object { $_.ProcessName -like "*StaticRust*" }

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -ano | findstr :5208
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∏–µ–Ω—Ç–æ–º

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∑–∞–º–µ–Ω–∏—Ç–µ URL —Å:
```
http://194.147.90.218/launcher/
```
–Ω–∞:
```
http://localhost:5208/api/
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–º–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
- `serversinfo` ‚Üí `servers`
- `hostings` ‚Üí `hostings`
- `news` ‚Üí `news`
- `version` ‚Üí `version`
- `client/version` ‚Üí `version/client` 